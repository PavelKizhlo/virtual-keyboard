(()=>{"use strict";class e{constructor(e,t,n,s,a){this.engCaseDown=e,this.engCaseUp=t,this.rusCaseDown=n,this.rusCaseUp=s,this.code=a}}const t=[],n=[],s=[],a=[],o=[],c=[];function d(e){let t=document.createElement("div");t.classList.add("key");let n=document.createElement("div");n.classList.add("eng");let s=document.createElement("div");s.classList.add("rus","hidden"),t.append(n),t.append(s),["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"].includes(e.engCaseDown)?(t.classList.add(`Key${e.engCaseDown.toUpperCase()}`,"alphabet"),t.setAttribute("data-code",`Key${e.engCaseDown.toUpperCase()}`)):"number"!=typeof+e.engCaseDown||Number.isNaN(+e.engCaseDown)?["Backspace","Tab","CapsLock","Enter","ShiftLeft","ShiftRight","Fn","ControlLeft","AltLeft","MetaLeft","Space","MetaRight","AltRight","ArrowLeft","ArrowUp","ArrowDown","ArrowRight"].includes(e.code)?(t.classList.add(`${e.code}`,"func"),t.setAttribute("data-code",`${e.code}`)):(t.classList.add(`${e.code}`),t.setAttribute("data-code",`${e.code}`)):(t.classList.add(`Digit${e.engCaseDown}`),t.setAttribute("data-code",`Digit${e.engCaseDown}`)),["а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ь","ы","ъ","э","ю","я"].includes(e.rusCaseDown)&&t.classList.add("alphabet-rus");let a=document.createElement("span");a.classList.add("key__text","case-down"),a.innerHTML=e.engCaseDown,n.append(a);let o=document.createElement("span");o.classList.add("key__text","case-up","hidden"),o.innerHTML=e.engCaseUp,n.append(o);let c=document.createElement("span");c.classList.add("key__text","case-down"),c.innerHTML=e.rusCaseDown,s.append(c);let d=document.createElement("span");return d.classList.add("key__text","case-up","hidden"),d.innerHTML=e.rusCaseUp,s.append(d),t}function r(t){let n=document.createElement("div");return n.classList.add("keyboard__row"),t.forEach((t=>{t instanceof e?n.append(d(t)):n.append(t)})),n}function u(){document.body.innerHTML='<div class="wrapper">\n<h1 class="title">Виртуальная клавиатура</h1>\n<textarea class="textarea" id="textarea" cols="52" rows="5"></textarea>\n<div class="keyboard"></div>\n<p class="system">Клавиатура создана в операционной системе Mac OS</p>\n<p class="language">Для переключения языка: комбинация Ctrl + Option (left) <br> или клавиша Fn (доступна только для клика, так как является системной клавишей)</p>\n</div>';let e=document.querySelector(".keyboard");e.append(r(t)),e.append(r(n)),e.append(r(s)),e.append(r(a)),e.append(r(o))}function l(){document.querySelectorAll(".eng").forEach((e=>e.classList.toggle("hidden"))),document.querySelectorAll(".rus").forEach((e=>e.classList.toggle("hidden"))),document.querySelector(".eng").classList.contains("hidden")?localStorage.setItem("lang","rus"):localStorage.setItem("lang","eng")}function i(){let e=document.querySelector(".ShiftLeft"),t=document.querySelector(".ShiftRight");document.querySelectorAll(".case-down").forEach((e=>e.classList.toggle("hidden"))),document.querySelectorAll(".case-up").forEach((e=>e.classList.toggle("hidden"))),e.addEventListener("mouseup",i),t.addEventListener("mouseup",i)}function p(){document.querySelector(".CapsLock").classList.toggle("key__pressed");let e=document.querySelectorAll(".alphabet>.eng>.case-down");e.forEach((e=>e.classList.toggle("hidden"))),e=document.querySelectorAll(".alphabet-rus>.rus>.case-down"),e.forEach((e=>e.classList.toggle("hidden")));let t=document.querySelectorAll(".alphabet>.eng>.case-up");t.forEach((e=>e.classList.toggle("hidden"))),t=document.querySelectorAll(".alphabet-rus>.rus>.case-up"),t.forEach((e=>e.classList.toggle("hidden")))}function h(){if(this instanceof MouseEvent){let e=this.target.parentElement.parentElement;"CapsLock"!==e.dataset.code&&e.classList.remove("key__pressed")}this instanceof KeyboardEvent&&document.querySelector(`.${this.code}`).classList.remove("key__pressed")}function w(e){if(window.removeEventListener("mouseup",this.classRemove),this.classRemove=h.bind(e),e instanceof MouseEvent&&e.target.classList.contains("key__text")){let t=e.target.parentElement.parentElement;"CapsLock"!==t.dataset.code&&t.classList.add("key__pressed"),function(e){let t=document.querySelector("#textarea"),n=e.target.parentElement.parentElement,s=e.target.innerHTML;n.classList.contains("func")||(t.value+=s),"Space"===n.dataset.code&&(t.value+=" "),"Backspace"===n.dataset.code&&(t.value=t.value.slice(0,-1)),"Enter"===n.dataset.code&&(t.value+="\n"),"Tab"===n.dataset.code&&(t.value+="    ")}(e),window.addEventListener("mouseup",this.classRemove)}if(e instanceof KeyboardEvent){let t=document.querySelector(`.${e.code}`);t&&("CapsLock"!==t.dataset.code&&t.classList.add("key__pressed"),window.addEventListener("keyup",this.classRemove))}}t.push(new e("`","~","ё","Ё","Backquote")),t.push(new e("1","!","1","!")),t.push(new e("2","@","2",'"')),t.push(new e("3","#","3","№")),t.push(new e("4","$","4",";")),t.push(new e("5","%","5","%")),t.push(new e("6","^","6",":")),t.push(new e("7","&","7","?")),t.push(new e("8","*","8","*")),t.push(new e("9","(","9","(")),t.push(new e("0",")","0",")")),t.push(new e("-","_","-","_","Minus")),t.push(new e("=","+","=","+","Equal")),t.push(new e("delete","delete","delete","delete","Backspace")),n.push(new e("tab","tab","tab","tab","Tab")),n.push(new e("q","Q","й","Й")),n.push(new e("w","W","ц","Ц")),n.push(new e("e","E","у","У")),n.push(new e("r","R","к","К")),n.push(new e("t","T","е","Е")),n.push(new e("y","Y","н","Н")),n.push(new e("u","U","г","Г")),n.push(new e("i","I","ш","Ш")),n.push(new e("o","O","щ","Щ")),n.push(new e("p","P","з","З")),n.push(new e("[","{","х","Х","BracketLeft")),n.push(new e("]","}","ъ","Ъ","BracketRight")),n.push(new e("\\","/","\\","/","Backslash")),s.push(new e("capslock","capslock","capslock","capslock","CapsLock")),s.push(new e("a","A","ф","Ф")),s.push(new e("s","S","ы","Ы")),s.push(new e("d","D","в","В")),s.push(new e("f","F","а","А")),s.push(new e("g","G","п","П")),s.push(new e("h","H","р","Р")),s.push(new e("j","J","о","О")),s.push(new e("k","K","л","Л")),s.push(new e("l","L","д","Д")),s.push(new e(";",":","ж","Ж","Semicolon")),s.push(new e("'",'"',"э","Э","Quote")),s.push(new e("return","return","return","return","Enter")),a.push(new e("shift","shift","shift","shift","ShiftLeft")),a.push(new e("z","Z","я","Я")),a.push(new e("x","X","ч","Ч")),a.push(new e("c","C","с","С")),a.push(new e("v","V","м","М")),a.push(new e("b","B","и","И")),a.push(new e("n","N","т","Т")),a.push(new e("m","M","ь","Ь")),a.push(new e(",","<","б","Б","Comma")),a.push(new e(".",">","ю","Ю","Period")),a.push(new e("/","?",".",",","Slash")),a.push(new e("shift","shift","shift","shift","ShiftRight")),o.push(new e("fn","fn","fn","fn","Fn")),o.push(new e("control","control","control","control","ControlLeft")),o.push(new e("option","option","option","option","AltLeft")),o.push(new e("command","command","command","command","MetaLeft")),o.push(new e("space","space","space","space","Space")),o.push(new e("command","command","command","command","MetaRight")),o.push(new e("option","option","option","option","AltRight")),c.push(new e("&uarr;","&uarr;","&uarr;","&uarr;","ArrowUp")),c.push(new e("&larr;","&larr;","&larr;","&larr;","ArrowLeft")),c.push(new e("&darr;","&darr;","&darr;","&darr;","ArrowDown")),c.push(new e("&rarr;","&rarr;","&rarr;","&rarr;","ArrowRight")),o.push(function(e){let t=document.createElement("div");return t.classList.add("keyboard__arrow-block"),e.forEach((e=>t.append(d(e)))),t}(c)),window.addEventListener("keydown",(e=>{let t=document.querySelector(`.${e.code}`),n=t.querySelector(":not(.hidden)>:not(.hidden)").querySelector(":not(.hidden)");t&&!t.classList.contains("func")&&(document.querySelector("#textarea").value+=n.innerHTML)}));let m=localStorage.getItem("lang");"eng"!==m&&m||u(),"rus"===m&&(u(),l()),function(){let e=new Set;window.addEventListener("mousedown",w),window.addEventListener("keydown",w),window.addEventListener("keydown",(e=>{"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||i(),"CapsLock"===e.code&&p(),"Enter"===e.code&&(textarea.value+="\n"),"Space"===e.code&&(textarea.value+=" "),"Tab"===e.code&&(e.preventDefault(),textarea.value+="    ")})),window.addEventListener("keyup",(t=>{"ShiftLeft"!==t.code&&"ShiftRight"!==t.code||i(),"CapsLock"===t.code&&p(),e.delete(t.code)})),window.addEventListener("keydown",(t=>{e.add(t.code),e.has("AltLeft")&&e.has("ControlLeft")&&(e.clear(),l())}))}(),function(){const e=document.querySelector("#textarea"),t=document.querySelector(".Fn"),n=document.querySelector(".ShiftLeft"),s=document.querySelector(".ShiftRight"),a=document.querySelector(".CapsLock");e.focus(),e.addEventListener("blur",(()=>e.focus())),e.addEventListener("keypress",(e=>{e.preventDefault()})),t.addEventListener("click",l),n.addEventListener("mousedown",i),s.addEventListener("mousedown",i),a.addEventListener("click",p)}()})();